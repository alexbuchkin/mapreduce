csvmap:


описание файлов-исходников:

csvmap.cpp: содержит функцию main, создаёт класс-интерпретатор mInterpretator, используя аргументы командной строки

executer.h: содержит класс executer для вычисления полиз-выражений

filewrapper.h: содержит класс fileWrapper для работы с файлами

lex.h: содержит enum lexType, класс Lex

mfparser.h: содержит класс mfParser - синтаксический анализатор выражений фильтрации

msparser.h: содержит класс msParser - синтаксический анализатор выражений проекции

minterpretator.h: содержит класс mInterpretator - основной класс утилиты

parser.h: содержит класс Parser - базовый класс для классов mfParser и msParser

scanner.h: содержит класс Scanner - общий лексический анализатор, таблицы разделителей и ключевых слов

table.h: содержит класс table для хранения идентификаторов и констант


описания классов:

class Lex - класс-лексема, хранит тип лексемы и дополнительную информацию (переменную int), в частности, индекс таблицы
Методы: конструктор, operator==

class Table - таблица идентификаторов, хранит уникальные идентификаторы
Методы: put, find, operator[]

class Scanner - лексический анализатор, общий для всех утилит и грамматик
Методы: конструктор, gl (возвращает очередную лексему)

class Parser - базовый синтаксический анализатор, является базовым классом для конкретных синтаксических анализаторов
Методы: конструктор, getConstant, getName (происходит обращение к соответствующим таблицам вложенного объекта класса Scanner)

class msParser (map select parser) - синтаксический анализатор для выражения проекции, наследует класс Parser.
После запуска процедуры analyze будет содержать полиз-запись выражения проекции
Содержит названия результирующих столбцов
Методы: процедуры для рекурсивного спуска

class mfParser (map filter parser) - синтаксический анализатор для выражения фильтрации, наследует класс Parser
После запуска процедуры analyze будет содержать полиз-запись выражения фильтрации
Методы: процедуры для рекурсивного спуска

class Executer - надстройка над стеком для вычисления полиз-выражений
Методы: put (для bool, double, lexType), getBool, getDouble

class fileWrapper - обёртка для входного и выходного файлов, содержит эти файлы, а также названия всех исходных столбцов и их значения в конкретной строке (обновляются каждый раз при считывании очередной строки из файла)
Методы: конструктор, деструктор, put (пишет в выходной файл, для строки и для double), getValue (получает значение нужного столбца), nextString (считывает новую строку и выполняет все связанные с этим действия (обновление значений и пр.), возвращает bool)

class mInterpretator - главный класс, содержит классы msParser, mfParser, fileWrapper, инициализируется в main
Методы: f (вычисляет выражение фильтрации), s (вычисляет выражение проекции), run (основа утилиты, вычисляет всё и пишет всё в выходной файл)
